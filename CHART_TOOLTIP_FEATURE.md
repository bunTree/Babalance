# æˆé•¿æ›²çº¿å›¾åæ ‡æç¤ºåŠŸèƒ½

## ğŸ¯ åŠŸèƒ½æ¦‚è¿°

æˆé•¿æ›²çº¿å›¾ç°åœ¨æ”¯æŒè§¦æ‘¸äº¤äº’ï¼Œå½“ç”¨æˆ·è§¦æ‘¸æˆ–ç§»åŠ¨æ‰‹æŒ‡åœ¨å›¾è¡¨ä¸Šæ—¶ï¼Œä¼šæ˜¾ç¤ºä¸€ä¸ªæ™ºèƒ½æç¤ºæ¡†ï¼Œå±•ç¤ºå½“å‰å…‰æ ‡ä½ç½®å¯¹åº”çš„è¯¦ç»†åæ ‡ä¿¡æ¯ã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### 1. å®æ—¶åæ ‡æ˜¾ç¤º
- **è§¦æ‘¸å“åº”**ï¼šæ”¯æŒ `touchstart`ã€`touchmove`ã€`touchend` äº‹ä»¶
- **ç²¾ç¡®å®šä½**ï¼šæ ¹æ®è§¦æ‘¸ä½ç½®è®¡ç®—å¯¹åº”çš„æ—¶é—´ç‚¹å’Œæ•°å€¼
- **æ™ºèƒ½æç¤º**ï¼šè‡ªåŠ¨æ˜¾ç¤ºæœ€ç›¸å…³çš„æ•°æ®ä¿¡æ¯

### 2. ä¸°å¯Œçš„ä¿¡æ¯å±•ç¤º
- **å¹´é¾„ä¿¡æ¯**ï¼šæ˜¾ç¤ºå¯¹åº”æ—¶é—´ç‚¹çš„å®å®å¹´é¾„ï¼ˆå¦‚"6ä¸ªæœˆ"ã€"1å²3ä¸ªæœˆ"ï¼‰
- **å®é™…æµ‹é‡å€¼**ï¼šå¦‚æœè¯¥æ—¶é—´ç‚¹æœ‰å®é™…è®°å½•ï¼Œæ˜¾ç¤ºå…·ä½“æ•°å€¼
- **WHOç™¾åˆ†ä½æ•°æ®**ï¼šæ˜¾ç¤ºæ‰€æœ‰WHOæ ‡å‡†æ›²çº¿çš„å¯¹åº”å€¼
  - P3 (3%)ï¼šç¬¬3ç™¾åˆ†ä½
  - P15 (15%)ï¼šç¬¬15ç™¾åˆ†ä½
  - P50 (50%)ï¼šç¬¬50ç™¾åˆ†ä½ï¼ˆä¸­ä½æ•°ï¼‰
  - P85 (85%)ï¼šç¬¬85ç™¾åˆ†ä½
  - P97 (97%)ï¼šç¬¬97ç™¾åˆ†ä½

### 3. æ™ºèƒ½äº¤äº’ä½“éªŒ
- **å³æ—¶æ˜¾ç¤º**ï¼šè§¦æ‘¸æ—¶ç«‹å³æ˜¾ç¤ºæç¤ºæ¡†
- **è·Ÿéšç§»åŠ¨**ï¼šæ‰‹æŒ‡ç§»åŠ¨æ—¶æç¤ºæ¡†å®æ—¶è·Ÿéš
- **å»¶è¿Ÿéšè—**ï¼šè§¦æ‘¸ç»“æŸåå»¶è¿Ÿ1ç§’éšè—ï¼Œæ–¹ä¾¿ç”¨æˆ·æŸ¥çœ‹
- **è¾¹ç•Œæ£€æµ‹**ï¼šåªåœ¨å›¾è¡¨æœ‰æ•ˆåŒºåŸŸå†…æ˜¾ç¤ºæç¤º

## ğŸ¨ è§†è§‰è®¾è®¡

### æç¤ºæ¡†æ ·å¼
- **åŠé€æ˜èƒŒæ™¯**ï¼šé»‘è‰²èƒŒæ™¯ï¼Œ85%é€æ˜åº¦
- **åœ†è§’è®¾è®¡**ï¼š8rpxåœ†è§’ï¼Œç°ä»£åŒ–å¤–è§‚
- **é˜´å½±æ•ˆæœ**ï¼šæŸ”å’Œé˜´å½±ï¼Œå¢å¼ºå±‚æ¬¡æ„Ÿ
- **ç®­å¤´æŒ‡ç¤º**ï¼šåº•éƒ¨ä¸‰è§’å½¢ç®­å¤´æŒ‡å‘è§¦æ‘¸ç‚¹

### æ€§åˆ«ä¸»é¢˜é€‚é…
- **ç”·å®ä¸»é¢˜**ï¼šè“è‰²ç³»æç¤ºæ¡†ï¼ˆrgba(79, 172, 254, 0.9)ï¼‰
- **å¥³å®ä¸»é¢˜**ï¼šç²‰è‰²ç³»æç¤ºæ¡†ï¼ˆrgba(255, 107, 157, 0.9)ï¼‰
- **é»˜è®¤ä¸»é¢˜**ï¼šæ·±è‰²æç¤ºæ¡†

### åŠ¨ç”»æ•ˆæœ
- **æ·¡å…¥åŠ¨ç”»**ï¼š0.2ç§’ç¼“åŠ¨å‡ºç°
- **ç¼©æ”¾æ•ˆæœ**ï¼šä»0.8å€ç¼©æ”¾åˆ°1å€
- **å¹³æ»‘è¿‡æ¸¡**ï¼šæ‰€æœ‰çŠ¶æ€å˜åŒ–éƒ½æœ‰è¿‡æ¸¡åŠ¨ç”»

## ğŸ”§ æŠ€æœ¯å®ç°

### åæ ‡è®¡ç®—ç®—æ³•
```javascript
// è®¡ç®—Xè½´ä½ç½®å¯¹åº”çš„æ•°æ®ç‚¹ç´¢å¼•
const relativeX = canvasX - padding
const dataIndex = Math.round((relativeX / chartWidth) * (currentData.values.length - 1))
const clampedIndex = Math.max(0, Math.min(dataIndex, currentData.values.length - 1))

// è®¡ç®—Yè½´å¯¹åº”çš„æ•°å€¼
const relativeY = canvasY - padding
const yValue = maxValue - (relativeY / chartHeight) * (maxValue - minValue)
```

### å¹´é¾„è®¡ç®—é€»è¾‘
```javascript
calculateAgeFromTimeLabel(timeLabel) {
  // æ”¯æŒå¤šç§æ—¶é—´æ ¼å¼
  // "2024-01" æ ¼å¼ -> è§£æä¸ºå…·ä½“æ—¥æœŸ
  // "1æœˆ" æ ¼å¼ -> ç»“åˆç”Ÿæ—¥å¹´ä»½è®¡ç®—
  
  const ageInMonths = this.calculateAgeInMonths(birthDate, targetDate)
  
  if (ageInMonths < 12) {
    return `${ageInMonths}ä¸ªæœˆ`
  } else {
    const years = Math.floor(ageInMonths / 12)
    const months = ageInMonths % 12
    return months === 0 ? `${years}å²` : `${years}å²${months}ä¸ªæœˆ`
  }
}
```

### äº‹ä»¶å¤„ç†æµç¨‹
1. **è§¦æ‘¸å¼€å§‹** (`onChartTouchStart`)
   - è®°å½•è§¦æ‘¸ä½ç½®
   - è°ƒç”¨åæ ‡è®¡ç®—å‡½æ•°

2. **è§¦æ‘¸ç§»åŠ¨** (`onChartTouchMove`)
   - å®æ—¶æ›´æ–°è§¦æ‘¸ä½ç½®
   - é‡æ–°è®¡ç®—å¹¶æ›´æ–°æç¤ºæ¡†

3. **è§¦æ‘¸ç»“æŸ** (`onChartTouchEnd`)
   - å»¶è¿Ÿ1ç§’åéšè—æç¤ºæ¡†
   - ç»™ç”¨æˆ·å……åˆ†æ—¶é—´æŸ¥çœ‹ä¿¡æ¯

## ğŸ“Š æ•°æ®å±•ç¤ºç¤ºä¾‹

### æœ‰å®é™…æµ‹é‡æ•°æ®æ—¶
```
6ä¸ªæœˆ
å¹´é¾„: 6ä¸ªæœˆ
å®é™…å€¼: 8.0kg
WHO P3 (3%): 6.2kg
WHO P15 (15%): 7.0kg
WHO P50 (50%): 7.9kg
WHO P85 (85%): 8.9kg
WHO P97 (97%): 10.0kg
```

### æ— å®é™…æµ‹é‡æ•°æ®æ—¶
```
3ä¸ªæœˆ
å¹´é¾„: 3ä¸ªæœˆ
åæ ‡å€¼: 7.2kg
WHO P3 (3%): 5.8kg
WHO P15 (15%): 6.5kg
WHO P50 (50%): 7.4kg
WHO P85 (85%): 8.3kg
WHO P97 (97%): 9.4kg
```

## ğŸ§ª æµ‹è¯•åŠŸèƒ½

### æµ‹è¯•æŒ‰é’®
- **æŒ‰é’®åç§°**ï¼šğŸ“ æµ‹è¯•åæ ‡æç¤º
- **æµ‹è¯•å†…å®¹**ï¼šæ˜¾ç¤ºæ¨¡æ‹Ÿçš„æç¤ºæ¡†ï¼Œå±•ç¤ºå®Œæ•´çš„æ•°æ®æ ¼å¼
- **æµ‹è¯•æ—¶é•¿**ï¼š3ç§’è‡ªåŠ¨éšè—

### æµ‹è¯•æ•°æ®
```javascript
tooltipValues: [
  'å¹´é¾„: 6ä¸ªæœˆ',
  'å®é™…å€¼: 8.0kg',
  'WHO P3 (3%): 6.2kg',
  'WHO P15 (15%): 7.0kg',
  'WHO P50 (50%): 7.9kg',
  'WHO P85 (85%): 8.9kg',
  'WHO P97 (97%): 10.0kg'
]
```

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### 1. ç²¾ç¡®æ•°æ®æŸ¥çœ‹
- ç”¨æˆ·æƒ³äº†è§£ç‰¹å®šæ—¶é—´ç‚¹çš„WHOæ ‡å‡†å€¼
- å¯¹æ¯”å®é™…æµ‹é‡å€¼ä¸æ ‡å‡†å€¼çš„å·®å¼‚
- æŸ¥çœ‹å®å®åœ¨ä¸åŒç™¾åˆ†ä½çš„ä½ç½®

### 2. è¶‹åŠ¿åˆ†æ
- è§‚å¯Ÿæˆé•¿æ›²çº¿çš„å˜åŒ–è¶‹åŠ¿
- è¯†åˆ«å¼‚å¸¸çš„å¢é•¿æ¨¡å¼
- è¯„ä¼°å‘è‚²æ˜¯å¦æ­£å¸¸

### 3. åŒ»å­¦å‚è€ƒ
- ä¸ºåŒ»ç”Ÿå°±è¯Šæä¾›å‡†ç¡®æ•°æ®
- è®°å½•å…³é”®æ—¶é—´ç‚¹çš„å‘è‚²æŒ‡æ ‡
- åˆ¶å®šä¸ªæ€§åŒ–çš„æˆé•¿è®¡åˆ’

## ğŸ”„ æœªæ¥ä¼˜åŒ–æ–¹å‘

### 1. åŠŸèƒ½å¢å¼º
- [ ] æ”¯æŒå¤šç‚¹è§¦æ‘¸å¯¹æ¯”
- [ ] æ·»åŠ æ•°æ®å¯¼å‡ºåŠŸèƒ½
- [ ] é›†æˆè¯­éŸ³æ’­æŠ¥
- [ ] æ”¯æŒæ‰‹åŠ¿ç¼©æ”¾

### 2. äº¤äº’ä¼˜åŒ–
- [ ] æ·»åŠ éœ‡åŠ¨åé¦ˆ
- [ ] ä¼˜åŒ–è§¦æ‘¸çµæ•åº¦
- [ ] æ”¯æŒé•¿æŒ‰å›ºå®šæç¤ºæ¡†
- [ ] æ·»åŠ å¿«æ·æ“ä½œèœå•

### 3. æ•°æ®æ‰©å±•
- [ ] æ˜¾ç¤ºåŒé¾„å®å®å¯¹æ¯”
- [ ] æ·»åŠ å‘è‚²é‡Œç¨‹ç¢‘æé†’
- [ ] é›†æˆè¥å…»å»ºè®®
- [ ] æä¾›ä¸ªæ€§åŒ–åˆ†ææŠ¥å‘Š

## ğŸ“± å…¼å®¹æ€§è¯´æ˜

- **å¾®ä¿¡å°ç¨‹åº**ï¼šå®Œå…¨æ”¯æŒ
- **è§¦æ‘¸è®¾å¤‡**ï¼šä¼˜åŒ–ä½“éªŒ
- **ä¸åŒå±å¹•å°ºå¯¸**ï¼šè‡ªé€‚åº”å¸ƒå±€
- **æ€§èƒ½è¦æ±‚**ï¼šè½»é‡çº§å®ç°ï¼Œæµç•…è¿è¡Œ

---

*æ­¤åŠŸèƒ½ä¸ºæˆé•¿æ›²çº¿å›¾çš„é‡è¦äº¤äº’å¢å¼ºï¼Œå¤§å¤§æå‡äº†ç”¨æˆ·æŸ¥çœ‹å’Œåˆ†æå®å®æˆé•¿æ•°æ®çš„ä¾¿åˆ©æ€§ã€‚* 