# 宝宝成长记录小程序 (Babalance)

一款专为0-3岁婴幼儿家长设计的成长数据记录和分析小程序，帮助家长轻松追踪宝宝的健康成长轨迹。

## ✨ 核心功能

### 📊 数据监测
- **实时指标展示**：体重、身高、头围等关键数据一目了然
- **WHO成长曲线图**：专业的折线图展示宝宝成长趋势，基于WHO标准
- **百分位对比**：与WHO标准曲线对比，了解宝宝发育状况
- **智能分析**：基于数据提供个性化的健康建议
- **时间维度**：支持7天、30天、全部时间段查看
- **图表交互**：支持触摸查看具体数据点和百分位信息

### 📝 数据记录
- **快速录入**：简洁的表单设计，快速记录日常数据
- **全面记录**：支持体重、身高、头围等多维度数据
- **智能提示**：数据验证和合理性检查
- **历史查看**：查看最近记录和历史数据
- **数据编辑**：支持修改历史记录

### 👶 宝宝档案
- **基本信息**：姓名、性别、出生日期等
- **出生数据**：出生体重、身高、头围
- **性别主题**：根据宝宝性别自动切换主题色彩
- **数据管理**：导出、备份、清空数据功能

## 🎨 设计特色

### 现代化UI设计
- **性别主题**：男宝蓝色、女宝粉色主题自动切换
- **渐变色彩**：温馨的渐变主题，符合婴幼儿应用风格
- **卡片布局**：清晰的信息层次，优秀的视觉体验
- **圆角设计**：柔和的圆角处理，更加亲和友好

### 用户体验优化
- **底部导航**：符合微信小程序设计规范的Tab导航
- **便捷操作**：快速录入、实时保存等便捷功能
- **数据验证**：实时验证输入数据的合理性
- **响应式设计**：适配不同屏幕尺寸
- **下拉刷新**：支持下拉刷新数据

## 📱 页面结构

### 1. 数据监测页面 (monitor)
- 四个核心指标卡片展示
- 可切换的WHO成长曲线图（体重、身高、头围）
- 时间范围选择器
- 智能分析提示
- 最近记录列表
- 图表触摸交互功能

### 2. 记录数据页面 (record)
- 基础数据录入（体重、身高、头围）
- 记录时间设置
- 数据验证和提示

### 3. 宝宝信息页面 (profile)
- 个性化头像和档案展示
- 基本信息管理
- 出生信息记录
- 数据管理功能

## 🔧 技术特点

### 微信小程序原生开发
- 使用微信小程序原生框架
- 遵循微信小程序设计规范
- 兼容不同基础库版本（避免ES2020语法兼容性问题）

### 数据存储
- **本地存储**：使用wx.setStorageSync进行数据持久化
- **云存储**：支持微信云开发数据同步
- **数据结构**：JSON格式存储，便于扩展和维护
- **数据验证**：完善的数据校验机制

### 图表绘制
- **Canvas绘制**：使用原生Canvas API绘制WHO成长曲线
- **交互支持**：支持触摸查看数据点详情和百分位信息
- **多数据集**：同时显示实际数据和WHO标准百分位线
- **动态缩放**：根据数据范围自动调整图表显示

### WHO标准集成
- **官方数据**：集成WHO儿童生长标准数据
- **性别区分**：男女宝宝使用不同的标准曲线
- **百分位计算**：P3, P15, P50, P85, P97百分位线显示
- **年龄适配**：根据宝宝年龄动态调整显示范围

## 📊 数据分析

### WHO成长曲线
- 基于WHO儿童生长标准
- 支持体重、身高、头围三个维度
- 显示P3, P15, P50, P85, P97百分位参考线
- 趋势分析和发育评估

### 智能提示
- 根据年龄和性别提供个性化建议
- 增长速度分析
- 发育状况评估
- 数据异常提醒

## 🚀 最新功能

### 图表交互
- 触摸图表查看具体数据点
- 显示对应的WHO百分位信息
- 年龄信息自动计算显示

### 性别主题
- 根据宝宝性别自动切换主题色彩
- 男宝：蓝色系主题
- 女宝：粉色系主题

### 数据同步
- 支持本地和云端数据同步
- 多设备数据一致性
- 数据安全备份

## 🔧 开发环境

### 技术栈
- 微信小程序原生框架
- JavaScript ES5/ES6（兼容性优化）
- Canvas 2D API
- 微信云开发

### 项目结构
```
├── pages/           # 页面文件
│   ├── monitor/     # 数据监测页面
│   ├── record/      # 记录数据页面
│   └── profile/     # 宝宝信息页面
├── components/      # 自定义组件
├── images/          # 图片资源
├── cloudfunctions/  # 云函数
└── design/          # 设计资源
```

## 📝 使用说明

1. **首次使用**：在宝宝信息页面完善基本档案
2. **日常记录**：在记录数据页面记录每日数据
3. **趋势查看**：在数据监测页面查看WHO成长曲线和分析
4. **数据管理**：定期备份或导出重要数据

## 🔒 隐私保护

- 数据存储在本地和用户的微信云开发环境
- 不收集和上传个人隐私信息到第三方
- 支持一键清空所有数据
- 符合微信小程序隐私规范

## 🐛 问题修复记录

### 兼容性修复
- 修复可选链操作符(`?.`)在部分微信小程序环境中的兼容性问题
- 替换为传统逻辑AND操作符(`&&`)确保全平台兼容

### 数据结构优化
- 统一图表数据结构格式
- 增强数据完整性检查
- 添加数据备份和恢复机制

### 性能优化
- 优化图表绘制性能
- 减少不必要的数据计算
- 改进内存使用效率

## 📞 技术支持

如遇到问题或有改进建议，欢迎反馈：
- 小程序内意见反馈
- GitHub Issues

---

**让科技助力宝宝健康成长 🍼👶💖** 